const $="[0-9A-Za-z-]+",r=`(?:\\+(${$}(?:\\.${$})*))`,n="0|[1-9]\\d*",t="[0-9]+",e="\\d*[a-zA-Z-][a-zA-Z0-9-]*",i=`(?:${t}|${e})`,o=`(?:${n}|${e})`,u=`(?:-(${o}(?:\\.${o})*))`,s=`${n}|x|X|\\*`,c=`[v=\\s]*(${s})(?:\\.(${s})(?:\\.(${s})(?:${u})?${r}?)?)?`,a=`^\\s*(${c})\\s+-\\s+(${c})\\s*$`,p="((?:<|>)?=?)",f=`(\\s*)${p}\\s*(${`[v=\\s]*${`(${t})\\.(${t})\\.(${t})`}${`(?:-?(${i}(?:\\.${i})*))`}?${r}?`}|${c})`,l="(?:~>?)",m=`(\\s*)${l}\\s+`,v="(?:\\^)",d=`(\\s*)${v}\\s+`,j=`^${v}${c}$`,h=`^${l}${c}$`,R=`^${p}\\s*${c}$`,x=`^${p}\\s*(${`v?${`(${n})\\.(${n})\\.(${n})`}${u}?${r}?`})$|^$`;function w($){return new RegExp($)}function z($){return!$||"x"===$.toLowerCase()||"*"===$}function A(...$){return r=>$.reduce(($,r)=>r($),r)}function Z($){return $.match(w(x))}function g($,r,n,t){const e=`${$}.${r}.${n}`;return t?`${e}-${t}`:e}function C($){return $.replace(w(a),($,r,n,t,e,i,o,u,s,c,a,p)=>`${r=z(n)?"":z(t)?`>=${n}.0.0`:z(e)?`>=${n}.${t}.0`:`>=${r}`} ${u=z(s)?"":z(c)?`<${+s+1}.0.0-0`:z(a)?`<${s}.${+c+1}.0-0`:p?`<=${s}.${c}.${a}-${p}`:`<=${u}`}`.trim())}function E($){return $.replace(w(f),"$1$2$3")}function L($){return $.replace(w(m),"$1~")}function X($){return $.replace(w(d),"$1^")}function b($){return $.trim().split(/\s+/).map($=>$.replace(w(j),($,r,n,t,e)=>z(r)?"":z(n)?`>=${r}.0.0 <${+r+1}.0.0-0`:z(t)?"0"===r?`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:`>=${r}.${n}.0 <${+r+1}.0.0-0`:e?"0"===r?"0"===n?`>=${r}.${n}.${t}-${e} <${r}.${n}.${+t+1}-0`:`>=${r}.${n}.${t}-${e} <${r}.${+n+1}.0-0`:`>=${r}.${n}.${t}-${e} <${+r+1}.0.0-0`:"0"===r?"0"===n?`>=${r}.${n}.${t} <${r}.${n}.${+t+1}-0`:`>=${r}.${n}.${t} <${r}.${+n+1}.0-0`:`>=${r}.${n}.${t} <${+r+1}.0.0-0`)).join(" ")}function k($){return $.trim().split(/\s+/).map($=>$.replace(w(h),($,r,n,t,e)=>z(r)?"":z(n)?`>=${r}.0.0 <${+r+1}.0.0-0`:z(t)?`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:e?`>=${r}.${n}.${t}-${e} <${r}.${+n+1}.0-0`:`>=${r}.${n}.${t} <${r}.${+n+1}.0-0`)).join(" ")}function q($){return $.split(/\s+/).map($=>$.trim().replace(w(R),($,r,n,t,e,i)=>{const o=z(n),u=o||z(t),s=u||z(e);return"="===r&&s&&(r=""),i="",o?">"===r||"<"===r?"<0.0.0-0":"*":r&&s?(u&&(t=0),e=0,">"===r?(r=">=",u?(n=+n+1,t=0,e=0):(t=+t+1,e=0)):"<="===r&&(r="<",u?n=+n+1:t=+t+1),"<"===r&&(i="-0"),`${r+n}.${t}.${e}${i}`):u?`>=${n}.0.0${i} <${+n+1}.0.0-0`:s?`>=${n}.${t}.0${i} <${n}.${+t+1}.0-0`:$})).join(" ")}function y($){return $.trim().replace(w("(<|>)?=?\\s*\\*"),"")}function B($,r){return($=+$||$)>(r=+r||r)?1:$===r?0:-1}function D($,r){return B($.major,r.major)||B($.minor,r.minor)||B($.patch,r.patch)||function($,r){const{preRelease:n}=$,{preRelease:t}=r;if(void 0===n&&t)return 1;if(n&&void 0===t)return-1;if(void 0===n&&void 0===t)return 0;for(let e=0,i=n.length;e<=i;e++){const $=n[e],r=t[e];if($!==r)return void 0===$&&void 0===r?0:$?r?B($,r):-1:1}return 0}($,r)}function F($,r){return $.version===r.version}function G($,r){switch($.operator){case"":case"=":return F($,r);case">":return D($,r)<0;case">=":return F($,r)||D($,r)<0;case"<":return D($,r)>0;case"<=":return F($,r)||D($,r)>0;case void 0:return!0;default:return!1}}function H($,r){if(!$)return!1;const n=function($){return A(C,E,L,X)($.trim()).split(/\s+/).join(" ")}(r),t=n.split(" ").map($=>function($){return A(b,k,q,y)($)}($)).join(" "),e=t.split(/\s+/).map($=>$.trim().replace(w("^\\s*>=\\s*0.0.0\\s*$"),"")),i=Z($);if(!i)return!1;const[,o,,u,s,c,a]=i,p={version:g(u,s,c,a),major:u,minor:s,patch:c,preRelease:null==a?void 0:a.split(".")};for(const f of e){const $=Z(f);if(!$)return!1;const[,r,,n,t,e,i]=$;if(!G({operator:r,version:g(n,t,e,i),major:n,minor:t,patch:e,preRelease:null==i?void 0:i.split(".")},p))return!1}return!0}export{H as s};
